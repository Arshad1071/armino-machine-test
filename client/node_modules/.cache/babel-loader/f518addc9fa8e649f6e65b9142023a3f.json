{"ast":null,"code":"var _jsxFileName = \"/Users/arshadvp/Desktop/test-app-two/client/src/components/Payment.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { getOrder } from \"./apiCalls\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Payment = () => {\n  _s();\n\n  const [values, setValues] = useState({\n    amount: 0,\n    orderId: \"\",\n    error: \"\",\n    success: false\n  });\n  const {\n    amount,\n    orderId,\n    success,\n    error\n  } = values;\n  useEffect(() => {\n    createOrder();\n  }, []);\n\n  const createOrder = () => {\n    getOrder().then(response => {\n      if (response.error) {\n        setValues({ ...values,\n          error: response.error,\n          success: false\n        });\n      } else {\n        setValues({ ...values,\n          error: \"\",\n          success: true,\n          orderId: response.id,\n          amount: response.amount\n        });\n      }\n    });\n  };\n\n  useEffect(() => {\n    if (amount > 0 && orderId != \"\") {\n      showRazoryPay();\n    }\n  }, [amount]);\n\n  const showRazoryPay = () => {\n    const form = document.createElement(\"form\");\n    form.setAttribute(\"action\", `http://localhost:5000/api/payment/callback`);\n    form.setAttribute(\"method\", \"POST\");\n    const script = document.createElement(\"script\");\n    script.src = \"https://checkout.razorpay.com/v1/checkout.js\";\n    script.setAttribute(\"data-key\", \"rzp_test_3GNp38jdvt2LSz\");\n    script.setAttribute(\"data-amount\", amount);\n    script.setAttribute(\"data-name\", \"Clever Coder\");\n    script.setAttribute(\"data-prefill.contact\", \"9678452132\");\n    script.setAttribute(\"data-prefill.email\", \"abc@gmail.com\");\n    script.setAttribute(\"data-order_id\", orderId);\n    script.setAttribute(\"data-prefill.name\", \"Tripthi\");\n    script.setAttribute(\"data-buttontext\", \"Buy NOW!!!\");\n    document.body.appendChild(form);\n    form.appendChild(script);\n    const input = document.createElement(\"input\");\n    input.type = \"hidden\";\n    input.custom = \"Hidden Element\";\n    input.name = \"hidden\";\n    form.appendChild(input);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: amount === 0 && orderId == \"\" && /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 51\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 12\n  }, this);\n};\n\n_s(Payment, \"7zCKi2mjNSd4B8b60ohO/5T9tMU=\");\n\n_c = Payment;\nexport default Payment;\n\nvar _c;\n\n$RefreshReg$(_c, \"Payment\");","map":{"version":3,"names":["React","useState","useEffect","getOrder","Payment","values","setValues","amount","orderId","error","success","createOrder","then","response","id","showRazoryPay","form","document","createElement","setAttribute","script","src","body","appendChild","input","type","custom","name"],"sources":["/Users/arshadvp/Desktop/test-app-two/client/src/components/Payment.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { getOrder } from \"./apiCalls\";\n\n\nconst Payment = () => {\n\n    const [values, setValues] = useState({\n        amount: 0,\n        orderId: \"\",\n        error: \"\",\n        success: false,\n    });\n\n    const { amount, orderId, success, error } = values;\n\n    useEffect(() => {\n        createOrder();\n    }, []);\n\n    const createOrder = () => {\n        getOrder().then((response) => {\n            if (response.error) {\n                setValues({ ...values, error: response.error, success: false });\n            } else {\n                setValues({\n                    ...values,\n                    error: \"\",\n                    success: true,\n                    orderId: response.id,\n                    amount: response.amount,\n                });\n            }\n        });\n    };\n\n    useEffect(() => {\n        if (amount > 0 && orderId != \"\") {\n            showRazoryPay();\n        }\n    }, [amount]);\n\n    const showRazoryPay = () => {\n        const form = document.createElement(\"form\");\n        form.setAttribute(\n            \"action\",\n            `http://localhost:5000/api/payment/callback`\n        );\n        form.setAttribute(\"method\", \"POST\");\n        const script = document.createElement(\"script\");\n        script.src = \"https://checkout.razorpay.com/v1/checkout.js\";\n        script.setAttribute(\"data-key\", \"rzp_test_3GNp38jdvt2LSz\");\n        script.setAttribute(\"data-amount\", amount);\n        script.setAttribute(\"data-name\", \"Clever Coder\");\n        script.setAttribute(\"data-prefill.contact\", \"9678452132\");\n        script.setAttribute(\"data-prefill.email\", \"abc@gmail.com\");\n        script.setAttribute(\"data-order_id\", orderId);\n        script.setAttribute(\"data-prefill.name\", \"Tripthi\");\n\n        script.setAttribute(\"data-buttontext\", \"Buy NOW!!!\");\n        document.body.appendChild(form);\n        form.appendChild(script);\n        const input = document.createElement(\"input\");\n        input.type = \"hidden\";\n        input.custom = \"Hidden Element\";\n        input.name = \"hidden\";\n        form.appendChild(input);\n    };\n    return <div>{amount === 0 && orderId == \"\" && <h1>Loading...</h1>}</div>;\n};\n\nexport default Payment;"],"mappings":"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"},"metadata":{},"sourceType":"module"}